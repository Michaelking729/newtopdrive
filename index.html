<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Drive | Ijebu-Ode Ride-Hailing</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #0a2e5c;
            --secondary: #1a5fb4;
            --accent: #ffcc00;
            --success: #28a745;
            --danger: #dc3545;
            --light: #f8f9fa;
            --dark: #212529;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
            overflow: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Login Screen */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease;
        }
        
        .login-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .login-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        
        .login-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 30px;
        }
        
        .login-logo i {
            color: var(--accent);
            font-size: 3rem;
        }
        
        .login-logo span {
            color: var(--accent);
        }
        
        .login-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .login-subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        
        .login-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5eb;
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 20px;
            transition: border 0.3s;
        }
        
        .login-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .login-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            width: 100%;
            padding: 16px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(26, 95, 180, 0.3);
        }
        
        /* Header */
        header {
            background: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            position: relative;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--primary);
            cursor: pointer;
        }
        
        .logo i {
            color: var(--accent);
            font-size: 2rem;
        }
        
        .logo span {
            color: var(--accent);
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-menu-btn {
            background: var(--light);
            border: none;
            color: var(--dark);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .user-menu-btn:hover {
            background: var(--secondary);
            color: white;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
        }
        
        /* Main Layout */
        .main-content {
            display: flex;
            height: calc(100vh - 80px);
        }
        
        /* Map Container */
        .map-container {
            flex: 1;
            position: relative;
            background: #e0e7f0;
        }
        
        #map {
            height: 100%;
            width: 100%;
            z-index: 1;
        }
        
        .map-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .map-control-btn {
            background: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--primary);
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .map-control-btn:hover {
            background: var(--secondary);
            color: white;
            transform: scale(1.1);
        }
        
        /* Ride Panel */
        .ride-panel {
            width: 420px;
            background: white;
            padding: 25px;
            box-shadow: -4px 0 15px rgba(0, 0, 0, 0.05);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .panel-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title i {
            color: var(--accent);
        }
        
        /* Location Inputs */
        .location-inputs {
            margin-bottom: 25px;
        }
        
        .input-group {
            display: flex;
            align-items: center;
            background: var(--light);
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid #e1e5eb;
        }
        
        .input-group.active {
            border-color: var(--secondary);
            background: #edf4ff;
        }
        
        .input-group i {
            color: #6c757d;
            margin-right: 12px;
            font-size: 1.1rem;
        }
        
        .input-group input {
            background: transparent;
            border: none;
            width: 100%;
            font-size: 0.95rem;
            color: #333;
        }
        
        .input-group input:focus {
            outline: none;
        }
        
        .swap-locations {
            display: flex;
            justify-content: center;
            margin: 5px 0;
        }
        
        .swap-btn {
            background: #e9ecef;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            color: #6c757d;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .swap-btn:hover {
            background: #dee2e6;
            transform: rotate(180deg);
        }
        
        /* Ijebu Locations Quick Pick */
        .ijebu-locations {
            margin-bottom: 20px;
        }
        
        .locations-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .location-tag {
            background: #f0f8ff;
            border: 1px solid #c2e0ff;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .location-tag:hover {
            background: #e1f0ff;
            transform: translateY(-2px);
        }
        
        /* Car Selection */
        .car-selection {
            margin-bottom: 25px;
        }
        
        .cars-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 10px;
        }
        
        .car-option {
            background: var(--light);
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .car-option:hover {
            border-color: var(--secondary);
        }
        
        .car-option.selected {
            border-color: var(--secondary);
            background: #edf4ff;
            box-shadow: 0 4px 12px rgba(26, 95, 180, 0.1);
        }
        
        .car-icon {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .car-name {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 5px;
        }
        
        .car-price {
            font-size: 0.9rem;
            color: var(--success);
            font-weight: 500;
        }
        
        .car-capacity {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 5px;
        }
        
        /* Special Offers */
        .special-offers {
            background: linear-gradient(135deg, #ffcc00 0%, #ff9900 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            color: var(--primary);
        }
        
        .offers-title {
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .offer-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .offer-item i {
            color: var(--primary);
        }
        
        /* Find Driver Button */
        .find-driver-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            width: 100%;
            padding: 16px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .find-driver-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(26, 95, 180, 0.3);
        }
        
        .find-driver-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Driver Offers Panel */
        .driver-offers-panel {
            display: none;
            flex: 1;
            flex-direction: column;
        }
        
        .offers-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .offers-subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 25px;
            font-size: 0.95rem;
        }
        
        .offers-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
        }
        
        .driver-offer {
            background: var(--light);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .driver-offer:hover {
            border-color: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
        }
        
        .driver-offer.selected {
            border-color: var(--secondary);
            background: #edf4ff;
            box-shadow: 0 8px 16px rgba(26, 95, 180, 0.15);
        }
        
        .offer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .driver-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        .offer-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
        }
        
        .offer-details {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .driver-rating {
            color: var(--accent);
            font-weight: 600;
        }
        
        .driver-car {
            font-size: 0.9rem;
            color: #666;
        }
        
        .driver-eta {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .offer-actions {
            display: flex;
            gap: 10px;
        }
        
        .accept-btn {
            flex: 1;
            background: var(--success);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .accept-btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .counter-btn {
            flex: 1;
            background: var(--accent);
            color: var(--primary);
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .counter-btn:hover {
            background: #e6b800;
            transform: translateY(-2px);
        }
        
        /* Ride Status Panel */
        .ride-status-panel {
            display: none;
            flex: 1;
            flex-direction: column;
        }
        
        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .status-title {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.2rem;
        }
        
        .status-badge {
            background: var(--accent);
            color: var(--primary);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        .driver-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .driver-avatar-large {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--primary);
            border: 3px solid var(--secondary);
        }
        
        .driver-details h4 {
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--primary);
            font-size: 1.3rem;
        }
        
        .driver-details .rating {
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .driver-details .car {
            font-size: 0.95rem;
            color: #666;
        }
        
        .ride-details {
            background: var(--light);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .ride-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .ride-detail:last-child {
            margin-bottom: 0;
            padding-top: 10px;
            border-top: 1px solid #dee2e6;
            font-weight: 700;
            color: var(--primary);
        }
        
        .ride-progress {
            margin-bottom: 25px;
        }
        
        .progress-bar-container {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--secondary);
            width: 0%;
            transition: width 0.5s;
            border-radius: 3px;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
        }
        
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.8rem;
            color: #666;
        }
        
        .step-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e9ecef;
            margin-bottom: 5px;
        }
        
        .progress-step.active .step-indicator {
            background: var(--secondary);
            box-shadow: 0 0 0 3px rgba(26, 95, 180, 0.2);
        }
        
        .progress-step.completed .step-indicator {
            background: var(--secondary);
        }
        
        .cancel-ride-btn {
            background: white;
            color: var(--danger);
            border: 2px solid var(--danger);
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: auto;
        }
        
        .cancel-ride-btn:hover {
            background: var(--danger);
            color: white;
        }
        
        /* New Features Section */
        .features-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid #e9ecef;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .feature-card {
            background: var(--light);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .feature-icon {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .feature-name {
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--primary);
        }
        
        /* Responsive Design */
        @media (max-width: 1100px) {
            .ride-panel {
                width: 380px;
            }
        }
        
        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }
            
            .ride-panel {
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
                height: 50vh;
            }
            
            .map-container {
                height: 50vh;
            }
            
            .locations-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .locations-grid, .cars-grid, .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease forwards;
        }
        
        /* Utility Classes */
        .hidden {
            display: none !important;
        }
        
        .visible {
            display: flex !important;
        }
        
        .text-success {
            color: var(--success);
        }
        
        .text-danger {
            color: var(--danger);
        }
        
        .mb-3 {
            margin-bottom: 15px;
        }
        
        .mb-4 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="login-screen">
        <div class="login-content">
            <div class="login-logo">
                <i class="fas fa-car"></i>
                <div>TOP<span>DRIVE</span></div>
            </div>
            
            <h2 class="login-title">Welcome to Top Drive</h2>
            <p class="login-subtitle">Ijebu-Ode's premier ride-hailing service</p>
            
            <input type="tel" class="login-input" id="phone-input" placeholder="Enter your phone number" value="08031234567">
            <button class="login-btn" id="login-btn">Continue</button>
            
            <div class="features-section" style="margin-top: 30px; border-top: 1px solid #e1e5eb; padding-top: 20px;">
                <p style="font-weight: 600; color: var(--primary); margin-bottom: 10px;">Why Choose Top Drive?</p>
                <div style="display: flex; flex-direction: column; gap: 8px; font-size: 0.9rem; color: #666;">
                    <div><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i> Lowest fares in Ijebu-Ode</div>
                    <div><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i> 500+ verified drivers</div>
                    <div><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i> 24/7 customer support</div>
                    <div><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i> Cash & digital payments</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main App (hidden until login) -->
    <div class="main-app hidden" id="main-app">
        <header>
            <div class="container header-content">
                <div class="logo" id="logo">
                    <i class="fas fa-car"></i>
                    <div>TOP<span>DRIVE</span></div>
                </div>
                
                <div class="user-menu">
                    <button class="user-menu-btn" id="wallet-btn">
                        <i class="fas fa-wallet"></i> <span id="wallet-balance">â‚¦15,750</span>
                    </button>
                    <button class="user-menu-btn" id="promo-btn">
                        <i class="fas fa-gift"></i> Promos
                    </button>
                    <div class="user-avatar" id="user-avatar">JD</div>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="map-container">
                <div id="map"></div>
                
                <div class="map-controls">
                    <button class="map-control-btn" id="locate-btn" title="Find my location">
                        <i class="fas fa-location-crosshairs"></i>
                    </button>
                    <button class="map-control-btn" id="zoom-in-btn" title="Zoom in">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="map-control-btn" id="zoom-out-btn" title="Zoom out">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            </div>
            
            <div class="ride-panel">
                <!-- Initial booking panel -->
                <div class="booking-panel" id="booking-panel">
                    <div class="panel-title">
                        <i class="fas fa-route"></i>
                        Book Your Ride in Ijebu-Ode
                    </div>
                    
                    <div class="ijebu-locations">
                        <div class="section-title">Popular Ijebu-Ode Locations</div>
                        <div class="locations-grid" id="ijebu-locations">
                            <!-- Ijebu locations will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="location-inputs">
                        <div class="input-group" id="pickup-input">
                            <i class="fas fa-circle" style="color: #1a5fb4;"></i>
                            <input type="text" id="pickup" placeholder="Enter pickup location" value="Ijebu-Ode Central Market">
                        </div>
                        
                        <div class="swap-locations">
                            <button class="swap-btn" id="swap-locations">
                                <i class="fas fa-exchange-alt"></i>
                            </button>
                        </div>
                        
                        <div class="input-group" id="destination-input">
                            <i class="fas fa-flag-checkered" style="color: #28a745;"></i>
                            <input type="text" id="destination" placeholder="Enter destination" value="Ogun State Polytechnic">
                        </div>
                    </div>
                    
                    <div class="car-selection">
                        <div class="section-title">Select Your Car Type</div>
                        <div class="cars-grid" id="cars-grid">
                            <!-- Car options will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="special-offers">
                        <div class="offers-title">
                            <i class="fas fa-bolt"></i> Special Offers Today
                        </div>
                        <div class="offer-item">
                            <i class="fas fa-check-circle"></i>
                            <span>20% off first ride: <strong>FIRST20</strong></span>
                        </div>
                        <div class="offer-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Weekend special: <strong>IJEBUWEEKEND</strong></span>
                        </div>
                    </div>
                    
                    <button class="find-driver-btn" id="find-driver-btn">
                        <i class="fas fa-search"></i> Find Available Drivers
                    </button>
                    
                    <div class="features-section">
                        <div class="section-title">Top Drive Features</div>
                        <div class="features-grid">
                            <div class="feature-card" id="safety-btn">
                                <div class="feature-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="feature-name">Safety First</div>
                            </div>
                            <div class="feature-card" id="price-btn">
                                <div class="feature-icon">
                                    <i class="fas fa-tag"></i>
                                </div>
                                <div class="feature-name">Best Price</div>
                            </div>
                            <div class="feature-card" id="support-btn">
                                <div class="feature-icon">
                                    <i class="fas fa-headset"></i>
                                </div>
                                <div class="feature-name">24/7 Support</div>
                            </div>
                            <div class="feature-card" id="payment-btn">
                                <div class="feature-icon">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                                <div class="feature-name">Easy Payment</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Driver offers panel -->
                <div class="driver-offers-panel" id="driver-offers-panel">
                    <h3 class="offers-title">Driver Offers</h3>
                    <p class="offers-subtitle">3 drivers available near you</p>
                    
                    <div class="offers-list" id="offers-list">
                        <!-- Driver offers will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Ride status panel -->
                <div class="ride-status-panel" id="ride-status-panel">
                    <div class="status-header">
                        <div class="status-title">Your Ride</div>
                        <div class="status-badge" id="status-badge">Driver En Route</div>
                    </div>
                    
                    <div class="driver-info" id="driver-info">
                        <!-- Driver info will be populated by JavaScript -->
                    </div>
                    
                    <div class="ride-details">
                        <div class="ride-detail">
                            <span>Pickup</span>
                            <span id="ride-pickup">Ijebu-Ode Central Market</span>
                        </div>
                        <div class="ride-detail">
                            <span>Destination</span>
                            <span id="ride-destination">Ogun State Polytechnic</span>
                        </div>
                        <div class="ride-detail">
                            <span>Car Type</span>
                            <span id="ride-car">Toyota Camry</span>
                        </div>
                        <div class="ride-detail">
                            <span>Fare</span>
                            <span id="ride-fare">â‚¦850</span>
                        </div>
                    </div>
                    
                    <div class="ride-progress">
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="progress-bar"></div>
                        </div>
                        <div class="progress-steps">
                            <div class="progress-step completed" id="step1">
                                <div class="step-indicator"></div>
                                <span>Booked</span>
                            </div>
                            <div class="progress-step active" id="step2">
                                <div class="step-indicator"></div>
                                <span>Pickup</span>
                            </div>
                            <div class="progress-step" id="step3">
                                <div class="step-indicator"></div>
                                <span>On Trip</span>
                            </div>
                            <div class="progress-step" id="step4">
                                <div class="step-indicator"></div>
                                <span>Complete</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="cancel-ride-btn" id="cancel-ride-btn">
                        <i class="fas fa-times"></i> Cancel Ride
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== LOGIN FUNCTIONALITY ====================
        const loginScreen = document.getElementById('login-screen');
        const mainApp = document.getElementById('main-app');
        const loginBtn = document.getElementById('login-btn');
        
        loginBtn.addEventListener('click', () => {
            // Hide login screen with fade effect
            loginScreen.classList.add('hidden');
            
            // Show main app after a short delay
            setTimeout(() => {
                mainApp.classList.remove('hidden');
                initApp();
            }, 500);
        });
        
        // Also allow login with Enter key on phone input
        document.getElementById('phone-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loginBtn.click();
            }
        });
        
        // ==================== IJEBU-ODE LOCATIONS ====================
        const ijebuLocations = [
            {name: "Ijebu-Ode Central Market", lat: 6.8220, lng: 3.9230, type: "market"},
            {name: "Ogun State Polytechnic", lat: 6.8150, lng: 3.9150, type: "school"},
            {name: "Awujale Palace", lat: 6.8180, lng: 3.9280, type: "landmark"},
            {name: "Itoro Park", lat: 6.8250, lng: 3.9180, type: "park"},
            {name: "Ijebu-Ode General Hospital", lat: 6.8270, lng: 3.9350, type: "hospital"},
            {name: "Ijebu-Ode Stadium", lat: 6.8120, lng: 3.9100, type: "stadium"},
            {name: "Odogbolu Junction", lat: 6.8350, lng: 3.9050, type: "junction"},
            {name: "Ijebu-Ode Motor Park", lat: 6.8300, lng: 3.9250, type: "transport"}
        ];
        
        function initIjebuLocations() {
            const locationsGrid = document.getElementById('ijebu-locations');
            
            ijebuLocations.forEach(location => {
                const locationElement = document.createElement('div');
                locationElement.className = 'location-tag';
                locationElement.innerHTML = `
                    <i class="fas fa-map-marker-alt" style="color: #1a5fb4; margin-right: 5px;"></i>
                    ${location.name}
                `;
                
                locationElement.addEventListener('click', () => {
                    document.getElementById('pickup').value = location.name;
                    if (pickupMarker) {
                        pickupMarker.setLatLng([location.lat, location.lng]);
                        updateRoute();
                    }
                });
                
                locationsGrid.appendChild(locationElement);
            });
        }
        
        // ==================== MAP INITIALIZATION ====================
        let map, pickupMarker, destinationMarker, routePolyline, carMarkers = [], movingCarMarker;
        
        function initMap() {
            // Ijebu-Ode coordinates
            map = L.map('map').setView([6.8206, 3.9206], 14);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            // Add pickup and destination markers
            pickupMarker = L.marker([ijebuLocations[0].lat, ijebuLocations[0].lng], {
                icon: L.divIcon({
                    className: 'custom-marker',
                    html: '<div style="background:#1a5fb4; width:24px; height:24px; border-radius:50%; border:3px solid white; box-shadow:0 0 8px rgba(0,0,0,0.3);"></div>',
                    iconSize: [24, 24]
                })
            }).addTo(map).bindPopup('<b>Pickup Location</b><br>Ijebu-Ode Central Market');
            
            destinationMarker = L.marker([ijebuLocations[1].lat, ijebuLocations[1].lng], {
                icon: L.divIcon({
                    className: 'custom-marker',
                    html: '<div style="background:#28a745; width:24px; height:24px; border-radius:50%; border:3px solid white; box-shadow:0 0 8px rgba(0,0,0,0.3);"></div>',
                    iconSize: [24, 24]
                })
            }).addTo(map).bindPopup('<b>Destination</b><br>Ogun State Polytechnic');
            
            // Add Ijebu-Ode location markers
            ijebuLocations.forEach(location => {
                let iconColor = '#1a5fb4';
                if (location.type === 'school') iconColor = '#28a745';
                if (location.type === 'hospital') iconColor = '#dc3545';
                if (location.type === 'park') iconColor = '#20c997';
                
                L.marker([location.lat, location.lng], {
                    icon: L.divIcon({
                        className: 'location-marker',
                        html: `<div style="background:${iconColor}; width:16px; height:16px; border-radius:50%; border:2px solid white; box-shadow:0 0 6px rgba(0,0,0,0.3);"></div>`,
                        iconSize: [16, 16]
                    })
                }).addTo(map).bindPopup(`<b>${location.name}</b><br>${location.type}`);
            });
            
            // Create route coordinates (Central Market to Ogun Poly)
            const routeCoordinates = [
                [ijebuLocations[0].lat, ijebuLocations[0].lng], // Central Market
                [6.8210, 3.9220],
                [6.8190, 3.9200],
                [6.8170, 3.9180],
                [6.8160, 3.9160],
                [ijebuLocations[1].lat, ijebuLocations[1].lng]  // Ogun Poly
            ];
            
            routePolyline = L.polyline(routeCoordinates, {
                color: '#1a5fb4',
                weight: 4,
                opacity: 0.7,
                dashArray: '10, 10'
            }).addTo(map);
            
            // Initially hide the route
            routePolyline.setStyle({ opacity: 0 });
            
            // Add fake car markers (available drivers in Ijebu-Ode)
            spawnNearbyCars();
            
            // Map controls
            document.getElementById('locate-btn').addEventListener('click', () => {
                map.setView([6.8206, 3.9206], 14);
            });
            
            document.getElementById('zoom-in-btn').addEventListener('click', () => {
                map.zoomIn();
            });
            
            document.getElementById('zoom-out-btn').addEventListener('click', () => {
                map.zoomOut();
            });
        }
        
        // Spawn fake cars around Ijebu-Ode
        function spawnNearbyCars() {
            // Clear existing car markers
            carMarkers.forEach(marker => map.removeLayer(marker));
            carMarkers = [];
            
            // Spawn 8 cars around Ijebu-Ode
            const carLocations = [
                {lat: 6.8250, lng: 3.9150},
                {lat: 6.8180, lng: 3.9200},
                {lat: 6.8220, lng: 3.9250},
                {lat: 6.8150, lng: 3.9180},
                {lat: 6.8280, lng: 3.9220},
                {lat: 6.8170, lng: 3.9150},
                {lat: 6.8230, lng: 3.9180},
                {lat: 6.8200, lng: 3.9100}
            ];
            
            carLocations.forEach((location, index) => {
                const carMarker = L.marker([location.lat, location.lng], {
                    icon: L.divIcon({
                        className: 'car-marker',
                        html: `<div style="background:#ffcc00; width:20px; height:20px; border-radius:50%; border:3px solid white; box-shadow:0 0 6px rgba(0,0,0,0.3); display:flex; align-items:center; justify-content:center;">
                                  <i class="fas fa-car" style="color:#0a2e5c; font-size:10px;"></i>
                               </div>`,
                        iconSize: [20, 20]
                    })
                }).addTo(map).bindPopup(`Available Driver ${index + 1} in Ijebu-Ode`);
                
                carMarkers.push(carMarker);
            });
        }
        
        // Update route on map
        function updateRoute() {
            const pickupValue = document.getElementById('pickup').value;
            const destValue = document.getElementById('destination').value;
            
            let pickupLoc = ijebuLocations.find(loc => loc.name === pickupValue);
            let destLoc = ijebuLocations.find(loc => loc.name === destValue);
            
            if (pickupLoc) {
                pickupMarker.setLatLng([pickupLoc.lat, pickupLoc.lng]);
            }
            
            if (destLoc) {
                destinationMarker.setLatLng([destLoc.lat, destLoc.lng]);
            }
            
            // Update route coordinates
            if (pickupLoc && destLoc) {
                const newRoute = [
                    [pickupLoc.lat, pickupLoc.lng],
                    [pickupLoc.lat + 0.001, pickupLoc.lng - 0.001],
                    [destLoc.lat - 0.001, destLoc.lng + 0.001],
                    [destLoc.lat, destLoc.lng]
                ];
                routePolyline.setLatLngs(newRoute);
            }
        }
        
        // ==================== CAR SELECTION ====================
        const carOptions = [
            {id: 1, name: "Toyota Camry", icon: "fas fa-car", price: "â‚¦850", capacity: "4 passengers", color: "#0a2e5c", features: ["AC", "Comfort", "Reliable"]},
            {id: 2, name: "Honda Accord", icon: "fas fa-car-side", price: "â‚¦950", capacity: "4 passengers", color: "#1a5fb4", features: ["Premium", "Spacious", "Quiet"]},
            {id: 3, name: "Toyota Corolla", icon: "fas fa-car", price: "â‚¦750", capacity: "4 passengers", color: "#28a745", features: ["Economical", "Fuel Efficient", "Clean"]},
            {id: 4, name: "SUV (Toyota RAV4)", icon: "fas fa-shuttle-van", price: "â‚¦1,200", capacity: "6 passengers", color: "#dc3545", features: ["Family", "Luggage Space", "Comfort"]}
        ];
        
        let selectedCarId = 1;
        
        function initCarSelection() {
            const carsGrid = document.getElementById('cars-grid');
            
            carOptions.forEach(car => {
                const carElement = document.createElement('div');
                carElement.className = `car-option ${car.id === selectedCarId ? 'selected' : ''}`;
                carElement.setAttribute('data-id', car.id);
                carElement.innerHTML = `
                    <div class="car-icon"><i class="${car.icon}"></i></div>
                    <div class="car-name">${car.name}</div>
                    <div class="car-price">${car.price}</div>
                    <div class="car-capacity">${car.capacity}</div>
                    <div style="font-size: 0.7rem; color: #6c757d; margin-top: 5px;">
                        <i class="fas fa-check-circle" style="color: #28a745;"></i> ${car.features[0]}
                    </div>
                `;
                
                carElement.addEventListener('click', () => {
                    document.querySelectorAll('.car-option').forEach(el => el.classList.remove('selected'));
                    carElement.classList.add('selected');
                    selectedCarId = car.id;
                    updateSelectedCarInfo(car);
                });
                
                carsGrid.appendChild(carElement);
            });
        }
        
        function updateSelectedCarInfo(car) {
            // This function can be used to show more details about selected car
            console.log(`Selected car: ${car.name} at ${car.price}`);
        }
        
        // ==================== NEW FEATURES ====================
        function initFeatureButtons() {
            // Safety feature
            document.getElementById('safety-btn').addEventListener('click', () => {
                alert("ðŸš— **Top Drive Safety Features:**\n\nâ€¢ Verified drivers with background checks\nâ€¢ Share ride details with emergency contacts\nâ€¢ 24/7 safety support line\nâ€¢ In-app emergency button\nâ€¢ Real-time ride tracking");
            });
            
            // Price feature
            document.getElementById('price-btn').addEventListener('click', () => {
                alert("ðŸ’° **Best Price Guarantee:**\n\nâ€¢ We match any lower price in Ijebu-Ode\nâ€¢ No surge pricing during peak hours\nâ€¢ Transparent fare breakdown\nâ€¢ Multiple payment options\nâ€¢ Loyalty discounts for frequent riders");
            });
            
            // Support feature
            document.getElementById('support-btn').addEventListener('click', () => {
                alert("ðŸ“ž **24/7 Customer Support:**\n\nâ€¢ Call: 0700-TOP-DRIVE (867-3748)\nâ€¢ WhatsApp: +234 803 123 4567\nâ€¢ Email: support@topdrive.ng\nâ€¢ In-app chat support\nâ€¢ Average response time: 2 minutes");
            });
            
            // Payment feature
            document.getElementById('payment-btn').addEventListener('click', () => {
                alert("ðŸ’³ **Easy Payment Options:**\n\nâ€¢ Cash payments\nâ€¢ Card payments (Visa, MasterCard)\nâ€¢ Bank transfer\nâ€¢ USSD: *123*1#\nâ€¢ Mobile money\nâ€¢ Top Drive Wallet");
            });
            
            // Promo button
            document.getElementById('promo-btn').addEventListener('click', () => {
                alert("ðŸŽ **Current Promotions:**\n\nâ€¢ **FIRST20**: 20% off your first ride\nâ€¢ **IJEBUWEEKEND**: 15% off weekend rides\nâ€¢ **REFER1000**: Get â‚¦1,000 when you refer a friend\nâ€¢ **STUDENT15**: 15% off for students with valid ID\n\nEnter promo code during booking!");
            });
        }
        
        // ==================== DRIVER OFFERS ====================
        const driverOffers = [
            {id: 1, name: "Emmanuel O.", rating: 4.9, car: "Toyota Camry 2020", price: "â‚¦850", eta: "3 min", color: "#0a2e5c", trips: "1,248"},
            {id: 2, name: "Chinwe O.", rating: 4.7, car: "Honda Accord 2021", price: "â‚¦900", eta: "5 min", color: "#1a5fb4", trips: "892"},
            {id: 3, name: "Musa I.", rating: 4.8, car: "Toyota Camry 2019", price: "â‚¦800", eta: "7 min", color: "#28a745", trips: "1,045"}
        ];
        
        function showDriverOffers() {
            // Switch to driver offers panel
            document.getElementById('booking-panel').classList.add('hidden');
            document.getElementById('driver-offers-panel').classList.add('visible');
            document.getElementById('ride-status-panel').classList.remove('visible');
            
            // Populate offers list
            const offersList = document.getElementById('offers-list');
            offersList.innerHTML = '';
            
            driverOffers.forEach(offer => {
                const offerElement = document.createElement('div');
                offerElement.className = 'driver-offer';
                offerElement.setAttribute('data-id', offer.id);
                offerElement.innerHTML = `
                    <div class="offer-header">
                        <div class="driver-name">${offer.name}</div>
                        <div class="offer-price">${offer.price}</div>
                    </div>
                    <div class="offer-details">
                        <div class="driver-rating">
                            <i class="fas fa-star"></i> ${offer.rating} (${offer.trips} trips)
                        </div>
                        <div class="driver-car">${offer.car}</div>
                    </div>
                    <div class="driver-eta">
                        <i class="fas fa-clock"></i> ${offer.eta} away â€¢ <i class="fas fa-car"></i> 2.1 km
                    </div>
                    <div class="offer-actions">
                        <button class="accept-btn" data-id="${offer.id}">
                            <i class="fas fa-check"></i> Accept
                        </button>
                        <button class="counter-btn" data-id="${offer.id}">
                            <i class="fas fa-exchange-alt"></i> Counter Offer
                        </button>
                    </div>
                `;
                
                offersList.appendChild(offerElement);
            });
            
            // Add event listeners to accept buttons
            document.querySelectorAll('.accept-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const driverId = parseInt(btn.getAttribute('data-id'));
                    acceptDriverOffer(driverId);
                });
            });
            
            // Add event listeners to counter buttons
            document.querySelectorAll('.counter-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const driverId = parseInt(btn.getAttribute('data-id'));
                    showCounterOffer(driverId);
                });
            });
            
            // Add selection effect to offers
            document.querySelectorAll('.driver-offer').forEach(offer => {
                offer.addEventListener('click', () => {
                    document.querySelectorAll('.driver-offer').forEach(el => el.classList.remove('selected'));
                    offer.classList.add('selected');
                });
            });
        }
        
        function acceptDriverOffer(driverId) {
            const selectedOffer = driverOffers.find(offer => offer.id === driverId);
            const selectedCar = carOptions.find(car => car.id === selectedCarId);
            
            // Switch to ride status panel
            document.getElementById('driver-offers-panel').classList.remove('visible');
            document.getElementById('ride-status-panel').classList.add('visible');
            
            // Update driver info
            document.getElementById('driver-info').innerHTML = `
                <div class="driver-avatar-large">
                    ${selectedOffer.name.split(' ').map(n => n[0]).join('')}
                </div>
                <div class="driver-details">
                    <h4>${selectedOffer.name}</h4>
                    <div class="rating">
                        <i class="fas fa-star"></i> ${selectedOffer.rating} â€¢ ${selectedOffer.trips} trips
                    </div>
                    <div class="car">${selectedOffer.car}</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">
                        <i class="fas fa-phone-alt"></i> 0803 123 4567
                    </div>
                </div>
            `;
            
            // Update ride details
            document.getElementById('ride-pickup').textContent = document.getElementById('pickup').value;
            document.getElementById('ride-destination').textContent = document.getElementById('destination').value;
            document.getElementById('ride-car').textContent = selectedCar.name;
            document.getElementById('ride-fare').textContent = selectedOffer.price;
            
            // Start the ride simulation
            startRideSimulation(driverId);
        }
        
        function showCounterOffer(driverId) {
            const selectedOffer = driverOffers.find(offer => offer.id === driverId);
            const newPrice = Math.floor(parseInt(selectedOffer.price.replace('â‚¦', '').replace(',', '')) * 0.9);
            
            alert(`ðŸ’¬ **Counter Offer Sent!**\n\nDriver: ${selectedOffer.name}\nOriginal Price: ${selectedOffer.price}\nYour Offer: â‚¦${newPrice.toLocaleString()}\n\nWaiting for driver response...`);
            
            // Simulate driver accepting counter offer after 2 seconds
            setTimeout(() => {
                alert(`âœ… **Driver Accepted!**\n\n${selectedOffer.name} has accepted your counter offer of â‚¦${newPrice.toLocaleString()}!\n\nYour ride is now confirmed.`);
                acceptDriverOffer(driverId);
            }, 2000);
        }
        
        // ==================== RIDE SIMULATION ====================
        let rideInterval;
        let rideProgress = 0;
        
        function startRideSimulation(driverId) {
            // Update status badge
            document.getElementById('status-badge').textContent = 'Driver En Route';
            
            // Show route on map
            routePolyline.setStyle({ opacity: 0.7 });
            
            // Remove other car markers
            carMarkers.forEach(marker => map.removeLayer(marker));
            
            // Create moving car marker
            movingCarMarker = L.marker([6.8250, 3.9150], {
                icon: L.divIcon({
                    className: 'moving-car-marker',
                    html: `<div style="background:#1a5fb4; width:30px; height:30px; border-radius:50%; border:3px solid white; box-shadow:0 0 10px rgba(26, 95, 180, 0.5); display:flex; align-items:center; justify-content:center;">
                              <i class="fas fa-car" style="color:white; font-size:14px;"></i>
                           </div>`,
                    iconSize: [30, 30]
                })
            }).addTo(map);
            
            // Zoom to show route
            map.fitBounds(routePolyline.getBounds(), { padding: [50, 50] });
            
            // Start progress simulation
            rideProgress = 0;
            rideInterval = setInterval(() => {
                rideProgress += 5;
                
                // Update progress bar
                document.getElementById('progress-bar').style.width = `${rideProgress}%`;
                
                // Update progress steps
                if (rideProgress >= 25) {
                    document.getElementById('step2').classList.add('completed');
                    document.getElementById('step2').classList.remove('active');
                    document.getElementById('step3').classList.add('active');
                    document.getElementById('status-badge').textContent = 'On Trip';
                    
                    // Show pickup notification
                    if (rideProgress === 25) {
                        showNotification("Driver has arrived at pickup location");
                    }
                }
                
                if (rideProgress >= 75) {
                    document.getElementById('step3').classList.add('completed');
                    document.getElementById('step3').classList.remove('active');
                    document.getElementById('step4').classList.add('active');
                    document.getElementById('status-badge').textContent = 'Arriving Soon';
                    
                    // Show arriving notification
                    if (rideProgress === 75) {
                        showNotification("You're almost at your destination!");
                    }
                }
                
                // Move car along route
                if (rideProgress <= 100) {
                    const route = routePolyline.getLatLngs();
                    const segmentIndex = Math.floor((rideProgress / 100) * (route.length - 1));
                    const segmentProgress = (rideProgress / 100) * (route.length - 1) - segmentIndex;
                    
                    if (segmentIndex < route.length - 1) {
                        const startPoint = route[segmentIndex];
                        const endPoint = route[segmentIndex + 1];
                        
                        const lat = startPoint.lat + (endPoint.lat - startPoint.lat) * segmentProgress;
                        const lng = startPoint.lng + (endPoint.lng - startPoint.lng) * segmentProgress;
                        
                        movingCarMarker.setLatLng([lat, lng]);
                    }
                }
                
                // Complete ride at 100%
                if (rideProgress >= 100) {
                    clearInterval(rideInterval);
                    document.getElementById('step4').classList.add('completed');
                    document.getElementById('status-badge').textContent = 'Completed';
                    
                    // Update wallet balance
                    const currentBalance = parseInt(document.getElementById('wallet-balance').textContent.replace('â‚¦', '').replace(',', ''));
                    const rideFare = parseInt(driverOffers.find(o => o.id === driverId).price.replace('â‚¦', '').replace(',', ''));
                    const newBalance = currentBalance - rideFare;
                    document.getElementById('wallet-balance').textContent = `â‚¦${newBalance.toLocaleString()}`;
                    
                    // Show completion message
                    setTimeout(() => {
                        alert(`âœ… **Ride Completed Successfully!**\n\nYou have arrived at ${document.getElementById('destination').value}\n\nFare: â‚¦${rideFare.toLocaleString()}\nWallet balance: â‚¦${newBalance.toLocaleString()}\n\nThank you for choosing Top Drive Ijebu-Ode!\n\nPlease rate your driver.`);
                        
                        // Show rating prompt after alert
                        setTimeout(() => {
                            const rating = prompt("Rate your driver (1-5 stars):", "5");
                            if (rating >= 4) {
                                alert("â­ Thank you for your 5-star rating!\n\nWe hope to serve you again soon.");
                            } else {
                                alert("Thank you for your feedback. We'll work to improve!");
                            }
                        }, 500);
                    }, 1000);
                }
            }, 300);
        }
        
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: #1a5fb4;
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-bell" style="color: #ffcc00;"></i>
                    <div>${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // ==================== INITIALIZE APP ====================
        function initApp() {
            initMap();
            initIjebuLocations();
            initCarSelection();
            initFeatureButtons();
            
            // Setup event listeners
            document.getElementById('find-driver-btn').addEventListener('click', showDriverOffers);
            
            document.getElementById('swap-locations').addEventListener('click', () => {
                const pickupInput = document.getElementById('pickup');
                const destinationInput = document.getElementById('destination');
                
                const tempValue = pickupInput.value;
                pickupInput.value = destinationInput.value;
                destinationInput.value = tempValue;
                updateRoute();
            });
            
            document.getElementById('cancel-ride-btn').addEventListener('click', () => {
                if (confirm("Are you sure you want to cancel this ride?")) {
                    clearInterval(rideInterval);
                    
                    // Reset to booking panel
                    document.getElementById('ride-status-panel').classList.remove('visible');
                    document.getElementById('driver-offers-panel').classList.remove('visible');
                    document.getElementById('booking-panel').classList.remove('hidden');
                    
                    // Reset map
                    if (movingCarMarker) {
                        map.removeLayer(movingCarMarker);
                    }
                    routePolyline.setStyle({ opacity: 0 });
                    spawnNearbyCars();
                    map.setView([6.8206, 3.9206], 14);
                    
                    alert("Ride cancelled successfully. No cancellation fee applied.");
                }
            });
            
            document.getElementById('wallet-btn').addEventListener('click', () => {
                alert(`ðŸ’° **Wallet Balance:** â‚¦15,750\n\n**Add Funds:**\n1. Bank Transfer\n2. Debit Card\n3. USSD: *123*1#\n4. Pay with QR Code\n\n**Recent Transactions:**\nâ€¢ Ride to Ogun Poly: -â‚¦850\nâ€¢ Top-up: +â‚¦20,000\nâ€¢ Ride to Market: -â‚¦650`);
            });
            
            document.getElementById('logo').addEventListener('click', () => {
                // Reset to booking panel
                document.getElementById('ride-status-panel').classList.remove('visible');
                document.getElementById('driver-offers-panel').classList.remove('visible');
                document.getElementById('booking-panel').classList.remove('hidden');
                
                // Reset map
                if (movingCarMarker) {
                    map.removeLayer(movingCarMarker);
                }
                routePolyline.setStyle({ opacity: 0 });
                spawnNearbyCars();
                map.setView([6.8206, 3.9206], 14);
            });
            
            // Add pulse animation to find driver button
            setTimeout(() => {
                document.getElementById('find-driver-btn').classList.add('pulse');
            }, 1000);
            
            // Demo instructions
            console.log("=== TOP DRIVE IJEBU-ODE DEMO ===");
            console.log("1. Login with any phone number");
            console.log("2. See interactive Ijebu-Ode map");
            console.log("3. Click Ijebu-Ode locations to set pickup");
            console.log("4. Select car type");
            console.log("5. Click 'Find Available Drivers'");
            console.log("6. See 3 driver offers with prices");
            console.log("7. Click 'Accept' on Emmanuel O.");
            console.log("8. Watch car move from Central Market to Ogun Poly");
            console.log("9. Try feature buttons: Safety, Price, Support, Payment");
        }
        
        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', () => {
            console.log("Top Drive Ijebu-Ode Platform Ready!");
        });
    </script>
</body>
</html>
